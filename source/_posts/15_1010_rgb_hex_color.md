---
layout: post
title:  JavaScript进行RGB和HEX(16进制)颜色转换
date:   2015-10-10 08:24:00
category: [JavaScript]
tags: [JavaScript,Web,Design]
---

> 如果你只是想看JavaScript代码，直接跳到文末。

## 三原色
三原色就是指这三种不能由另外两种原色混合产生的颜色，而其它色可由这三色按照一定的比例混合出来，色彩学上将这三个独立的色称为三原色。

<!-- more -->

### 三原色配色表

- 色光三原色是红绿蓝

我们在网页设计中用到的三原色就是这种。

（红）+（绿）=（黄）
（蓝）+（绿）=（青）
（红）+（蓝）=（品红）
（绿）+（蓝）+（红）=（白）

- 印刷三原色是品红、青、黄

（青）+（品红）=（蓝）
（品红）+（黄）=（红）
（黄）+（青）=（绿）
（青）+（品红）+（黄）=（黑）

- 颜料三原色（美术三原色）是红黄蓝

（红）+（黄）=（橙）
（蓝）+（红）=（紫）
（蓝）+（黄）=（绿）

##混色理论
（此处摘自百度百科“[三原色原理][1]”）
色彩的混合分为加法混合和减法混合，色彩还可以在进入视觉之后才发生混合，称为中性混合。

### 加法混合
加法混合是指色光的混合，两种以上的光混合在一起，光亮度会提高，混合色的光的总亮度等于相混各色光亮度之和。色光混合中，三原色是红、绿、蓝。这三色光是不能用其它别的色光相混而产生的。而：

- 红光+绿光=黄光
- 绿光+蓝光=青光
- 蓝光+红光=紫光
- 黄光、青光、紫光为间色光。

如果只通过两种色光混合就能产生白色光，那么这两种光就是互为补色。例如：红色光与青色光；绿色光与紫色光；蓝色光与黄色光。
### 减法混合
减法混合主要是指的色料的混合。

白色光线透过有色滤光片之后，一部分光线被反射而吸收其余的光线，减少掉一部分辐射功率，最后透过的光是两次减光的结果，这样的色彩混合称为减法混合。一般说来，透明性强的染料，混合后具有明显的减光作用。

减法混合的三原色是加法混合的三原色的补色，即：翠绿的补色红（品红）、蓝紫的补色黄（淡黄）、朱红的补色蓝（天蓝）。用两种原色相混，产生的颜色为间色：

- 红色+蓝色=紫色
- 黄色+红色=橙色
- 黄色+蓝色=绿色

如果两种颜色能产生灰色或黑色，这两种色就是互补色。三原色按一定的比例相混，所得的色可以是黑色或黑灰色。在减法混合中，混合的色越多，明度越低，纯度也会有所下降。
### 中性混合
中性混合是基于人的视觉生理特征所产生的视觉色彩混合，而并不变化色光或发光材料本身，混色效果的亮度既不增加也不减低，所以称为中性混合。
有两种视觉混合方式：

A:颜色旋转混合：把两种或多种色并置于一个圆盘上，通过动力令其快速旋转，而看到的新的色彩。颜色旋转混合效果在色相方面与加法混合的规律相似，但在明度上却是相混各色的平均值。

B:空间混合：将不同的颜色并置在一起，当它们在视网膜上的投影小到一定程度时，这些不同的颜色刺激就会同时作用到视网膜上非常邻近的部位的感光细胞，以致眼睛很难将它们独立地分辨出来，就会在视觉中产生色彩的混合，这种混合称空间混合。

## RGB
RGB色彩的标记方式是 RGB(0~255 , 0~255, 0~255)，其中括弧内以逗号分隔的三组数值恰好是 (红, 绿, 蓝) 的色彩数值，所以数值会是 0~255 ，表示颜色值的多少。

RGB混色原就是加法混色。RGB(0, 0, 0) 也就是红, 绿, 蓝都没有，就是黑色。RGB(255, 255, 255)是红, 绿, 蓝都最大值就成了白色。RGB(255, 0, 0)就是红色。可以这样记忆：数值越小越黑暗。

## 16进制(HEX)
表示形式为“#”和6位16进制的数值，每两位数字一次代表红、绿、蓝，即`#RRGGBB`。每位数字取值范围是 0-F 。10对应A，11对应B，12对应C，13对应D，14对应E，15对应F。

与RGB同理，0最小，F最大，#000000（可缩写成#000）是黑色，#FFF是白色，#F00是红色。

## RGB 与 16进制颜色的转换
### RGB  转16进制
16进制一个三原色数值等于相应RGB的三原色数值除以16，第一位是商，第二位是余数。超过9的用字母表示，10对应A，11对应B，12对应C，13对应D，14对应E，15对应F。

例如：

    RGB(169, 245, 8)
    R： 169 / 16 = 10 余 9，而10对应A，即 A9
    G： 245 / 16 = 15 余 5, 而15对应F，即 F5
    B： 8 / 16 = 0 余 8，即 08
    所以RGB(169, 245, 8) = #A9F508

### 16进制 转 RGB

RGB的数值是16乘以HEX的第一位加上HEX的第二位，数字10以下的RGB和HEX都是相同的，但需要在前面补0成两位数，10对应A，11对应B，12对应C，13对应D，14对应E，15对应F。

例如：

    #A9F508 = RGB(16 * 10 + 9， 16 * 15 + 5, 16 * 0 + 8) = RGB(169, 245, 8)

## 用JavaScript实现RGB和16进制颜色转换
我用JavaScript实现了两个方法，供参考:

### RGB  转16进制

	var rgbToHex = function(rgb) {
		// rgb(x, y, z)
		var color = rgb.toString().match(/\d+/g); // 把 x,y,z 推送到 color 数组里
		var hex = "#";

		for (var i = 0; i < 3; i++) {
			// 'Number.toString(16)' 是JS默认能实现转换成16进制数的方法.
			// 'color[i]' 是数组，要转换成字符串.
			// 如果结果是一位数，就在前面补零。例如： A变成0A
			hex += ("0" + Number(color[i]).toString(16)).slice(-2);
		}
		return hex;
	};

### 16进制 转 RGB

    // 能处理 #axbycz 或 #abc 形式
	var hexToRgb = function(hex) {
		var color = [], rgb = [];

		hex = hex.replace(/#/,"");

        if (hex.length == 3) { // 处理 "#abc" 成 "#aabbcc"
            var tmp = [];
            for (var i = 0; i < 3; i++) {
                tmp.push(hex.charAt(i) + hex.charAt(i));
            }
            hex = tmp.join("");
        }

		for (var i = 0; i < 3; i++) {
			color[i] = "0x" + hex.substr(i * 2, 2);
			rgb.push(parseInt(Number(color[i])));
		}
		return "rgb(" + rgb.join(",") + ")";
	};

另附网友小秦提供的优化版，比我的巧妙很多：

	var hexToRgb = function(hex) {
		var rgb = [];

		hex = hex.substr(1);//去除前缀 # 号

		if (hex.length === 3) { // 处理 "#abc" 成 "#aabbcc"
			hex = hex.replace(/(.)/g, '$1$1');
		}

		hex.replace(/../g, function(color){
			rgb.push(parseInt(color, 0x10));//按16进制将字符串转换为数字
		});

		return "rgb(" + rgb.join(",") + ")";
	};

  [1]: http://baike.baidu.com/link?url=dNaFfIX8y8Ybn3B6YOMQtkWv8KLFn5-qqi8XoTU1L3Ot_4fMu7Ta7NlBfdlPLiCl4u58UqZJKc-wrIw4MMUiBq#3